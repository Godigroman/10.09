# Домашнее задание к занятию "`Защита сети`" - `Клименко Олег`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### Задание 1

`Проведите разведку системы и определите, какие сетевые службы запущены на защищаемой системе:`

1. `sudo nmap -sA < ip-адрес >`
2. `sudo nmap -sT < ip-адрес >`
3. `sudo nmap -sS < ip-адрес >`
4. `sudo nmap -sV < ip-адрес >`

По желанию можете поэкспериментировать с опциями: [https://nmap.org/man/ru/man-briefoptions.html](https://nmap.org/man/ru/man-briefoptions.html).

`В качестве ответа пришлите события, которые попали в логи Suricata и Fail2Ban, прокомментируйте результат.`

Логи Suricata выдают информацию о сканировании портов - время, ip адрес, порт, возможно NMAP сканирование и тип сканирования.

![](https://cdn.discordapp.com/attachments/1265236202999779328/1277222358263791658/image.png?ex=66cc6183&is=66cb1003&hm=90b5aebcdf5bb5cb4b0b3b0beafd7b1f19228a9521075d5b0759eb98f7b37cd4&)

![](https://cdn.discordapp.com/attachments/1265236202999779328/1277224836787339264/image.png?ex=66cc63d2&is=66cb1252&hm=927fb2af37be8bd53c940338df50eef33d62a4149e6435e51e585980e9756dc7&)

---

### Задание 2

Проведите атаку на подбор пароля для службы SSH:

hydra -L users.txt -P pass.txt < ip-адрес > ssh

1. Настройка hydra:
- создайте два файла: users.txt и pass.txt;
- в каждой строчке первого файла должны быть имена пользователей, второго — пароли. В нашем случае это могут быть случайные строки, но ради эксперимента можете добавить имя и пароль существующего пользователя.

Дополнительная информация по hydra: [https://kali.tools/?p=1847](https://kali.tools/?p=1847).

2. Включение защиты SSH для Fail2Ban:

- открыть файл /etc/fail2ban/jail.conf,
- найти секцию ssh,
- установить enabled в true.

Дополнительная информация по Fail2Ban: [https://putty.org.ru/articles/fail2ban-ssh.html](https://putty.org.ru/articles/fail2ban-ssh.html).

В качестве ответа пришлите события, которые попали в логи Suricata и Fail2Ban, прокомментируйте результат.

Логи Fail2Ban выдают информацию о неудачных попытках входа по ssh - время, ip, и информацию о блокировке по ip адресу. При попытке просканировать хост с помощью гидры еще раз получаем уведомление об отказе.

Логи Suricata отображают массовое обращение к порту 22 - с указанием времени, ip адреса и порта.

![](https://cdn.discordapp.com/attachments/1265236202999779328/1277228117580058686/image.png?ex=66cc66e0&is=66cb1560&hm=171dc124c2ca3daf8e88baf58ad191cecfb951340a0ae9018f6f51b1c871288a&)

![](https://cdn.discordapp.com/attachments/1265236202999779328/1277230528755535964/image.png?ex=66cc691f&is=66cb179f&hm=da6395c28ebae44f5ef2d2972b4b214ca9093d55a11b2a815795b1b2413edbc8&)

![](https://cdn.discordapp.com/attachments/1265236202999779328/1277593848473976843/image.png?ex=66cdbb7e&is=66cc69fe&hm=8d9efe13059a62cb12bab3d9c19c93abb5088978bc0af4074a514852d3923adb&)
















